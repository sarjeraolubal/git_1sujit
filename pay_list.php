<html>  <head>    <title>       Displaying PAYROLL Register   </title>  </head>  <body>    <h1>Displaying PAYROLL Register  </h1>        <form action="<?php $_SERVER['PHP_SELF']?>" method="post">        <label>Year(YYYYMM)</label><input type="year" name="year"/>        <label>BADGE NUMBER</label><input type="text" name="badge_no"/>        <label>Company Code</label><input type="text" name="comp_code"/>        <input type="submit"/>        </form>    <?php	//require "dist/lib/commonfunc.php";//validatepage();require "dist/lib/dbconnection.php";//require "dist/lib/dataextrfunc.php";	     GLOBAL $selecteddata_list;         GLOBAL $List_Pay_MASTER ;        if((isset($_POST['year']))||(isset($_POST['badge_no']))||(isset($_POST['comp_code']))){        if($_POST['year']==""){$post_year='%';}else {$post_year=$_POST['year'];}        if($_POST['comp_code']==""){$post_comp_code='%';}else {$post_comp_code=$_POST['comp_code'];}        if($_POST['badge_no']==""){$post_badge_no='%';}else {$post_badge_no=$_POST['badge_no'];} 		$selecteddata_list = search_datalist($post_year,$post_comp_code,$post_badge_no);		$List_Pay_MASTER  = List_Pay_M($selecteddata_list);		if ($List_Pay_MASTER == "SUCCESS"){ echo  $record_count . "  records inserted "; }                                      ELSE	{ echo  " NONE records inserted "; }	                }//close if 	    ?>       <p><a href=loggeduserhome.php>GO BACK MAIN MENU</a></p>  </body></html>    <?php          function search_datalist($post_year,$post_comp_code,$post_badge_no){          $extr_datalist = array();            $pdo = DBconnectionUtil::connect();           $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);         try{              $sql = "Select gm_tabreckeyPrimary,			                 lp_pay_m.sys_co_code,                             lp_pay_m.py_year_mm,                             lp_pay_m.py_badge_no,                              lp_pay_m.py_gang_code,                              lp_gang_m.gm_name,                              lp_pay_m.basic,							 lp_pay_m.da,                              lp_pay_m.hra, 							 lp_pay_m.pf,                              lp_pay_m.ptax, 							 lp_pay_m.advance,                              lp_pay_m.esic_e, 							 lp_pay_m.net_salary,                             lp_pay_m.category,                              lp_pay_m.account_number,                              lp_pay_m.esic_o,                              lp_pay_m.no_of_days                  From        lp_gang_m                  Inner Join  lp_pay_m On lp_pay_m.py_badge_no = lp_gang_m.gm_badge_no                                                    HAVING    lp_pay_m.sys_co_code like '".$post_comp_code."'  AND  lp_pay_m.py_year_mm    like '".$post_year."' AND lp_pay_m.py_badge_no like '".$post_badge_no."'                           Order By  lp_pay_m.sys_co_code, 				             lp_pay_m.py_year_mm, 				             lp_pay_m.py_badge_no			                 ";                $q = $pdo->prepare($sql);                $q->execute();        $extr_datalist = $q->fetchAll();         }         catch (PDOException $sql_err) {	      $errmsg = "TechError: search data list:".$sql_err->getMessage().", contact system administrator";	        error_log($errmsg,0);                              }DBconnectionUtil::disconnect();return $extr_datalist;     }//-- List of  db table	                   function List_Pay_M(){                       $pdo = DBconnectionUtil::connect();                        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);                       GLOBAL $errmsg;                //-- For Gang Code							    GLOBAL $selecteddata_list;				global $record_count;                $record_count   = count($selecteddata_list);      echo "<table border='1'>";      echo "<tr>";      echo "<th>Sr.no</th> <th>Company Code </th> <th>YYYYY MM </th> <th>Badge no</th> <th> Name </th> <th>GANG CODE</th> <th>category </th><th>Bank A/c No.</th> <th>basic</th> <th>DA </th><th>HRA </th> <th>PF</th> <th>PTAX </th><th>Advance</th> <th>ESIC-EMP</th> <th>Net Pay</th> <th>ESIC-Office </th><th>No.of days</th> ";         foreach ($selecteddata_list as $row) {      {        echo "<tr>";        echo "<td>", $row['gm_tabreckeyPrimary'], "</td><td>", $row['sys_co_code'], "</td><td>", $row['py_year_mm'], "</td><td>", $row['py_badge_no'],"</td><td>",  $row['gm_name'], "</td><td>", $row['py_gang_code'], "</td><td>", $row['category'], "</td><td>", $row['account_number'], "</td><td>", $row['basic'], "</td><td>", $row['da'], "</td><td>", $row['hra'], "</td><td>", $row['pf'], "</td><td>", $row['ptax'], "</td><td>", $row['advance'] , "</td><td>", $row['esic_e'], "</td><td>", $row['net_salary'],"</td><td>", $row['esic_o'], "</td><td>", $row['no_of_days'] ;            echo "</tr>";      }		 }DBconnectionUtil::disconnect();return "SUCCESS";}?>