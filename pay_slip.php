<html>  <head>    <title>       Displaying all members Register   </title>   <style>   .textright{	   text-align:right;   }   </style>  </head>  <body>    <h1>Displaying all members Register  </h1>    <?php	//require "dist/lib/commonfunc.php";//validatepage();require "dist/lib/dbconnection.php";require "numtoword2.php";//require "dist/lib/dataextrfunc.php";				   //  function mysql_escape_string($string){return mysqli_escape_string($string);}	          	     GLOBAL $selecteddata_list;         GLOBAL $List_Pay_MASTER ;		$selecteddata_list = search_datalist();				$List_Pay_MASTER  = List_Pay_M($selecteddata_list);		if ($List_Pay_MASTER == "SUCCESS"){ echo  $record_count . "  records inserted "; }                                      ELSE	{ echo  " NONE records inserted "; }								        // mysqli_close($connection);    ?>   <p><a href=#>GO BACK MAIN MENU</a></p>  </body></html>    <?php          function search_datalist(){          $extr_datalist = array();            $pdo = DBconnectionUtil::connect();           $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);         try{              $sql = "Select gm_tabreckeyPrimary,			                 lp_pay_m.sys_co_code,                             lp_pay_m.py_year_mm,                             lp_pay_m.py_badge_no,                              lp_pay_m.py_gang_code,                              lp_gang_m.gm_name,                              lp_pay_m.basic,							 lp_pay_m.da,                              lp_pay_m.hra, 							 lp_pay_m.pf,                              lp_pay_m.ptax, 							 lp_pay_m.advance,                              lp_pay_m.esic_e, 							 lp_pay_m.net_salary,                             lp_pay_m.category,                              lp_pay_m.account_number,                              lp_pay_m.esic_o,                              lp_pay_m.no_of_days                  From        lp_gang_m                  Inner Join  lp_pay_m On lp_pay_m.py_badge_no = lp_gang_m.gm_badge_no                    Order By  lp_pay_m.sys_co_code, 				             lp_pay_m.py_year_mm, 				             lp_pay_m.py_badge_no			                 ";                $q = $pdo->prepare($sql);                $q->execute();        $extr_datalist = $q->fetchAll();								         }         catch (PDOException $sql_err) {	      $errmsg = "TechError: search data list:".$sql_err->getMessage().", contact system administrator";	        error_log($errmsg,0);                              }DBconnectionUtil::disconnect();return $extr_datalist;     }	 	 	 //-- List of  db table	                   function List_Pay_M()				  {                       $pdo = DBconnectionUtil::connect();                        $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);                       GLOBAL $errmsg;                //-- For Gang Code							    GLOBAL $selecteddata_list;                global $net_salary;				global $record_count;                $record_count   = count($selecteddata_list);					//			foreach ($selecteddata_list as $row) {					// echo "<table border='1'>";																																																		     	       $sumbasic      = 0;	       $sumda         = 0;		   $sumpay_da     = 0;           $sumgross      = 0;			           $sumhra        = 0;				       $sumpf         = 0;           $sumptax       = 0;			           $sumadvance    = 0;						   $sumesic_e     = 0;           $sumsalary     = 0;			           $sumnet_salary = 0;				       $sumesic_o     = 0;         									         foreach ($selecteddata_list as $row)       {                          $py_badge_no   =      $row['py_badge_no'] ;				//  strzero($py_badge_no,8);			//	str_pad($py_badge_no,4," ",STR_PAD_LEFT);			    $py_year_mm     =     $row['py_year_mm']; 				$yyMM           =     substr($py_year_mm,2,2) ."/" . substr($py_year_mm,4,2);                $py_gang_code   =     $row['py_gang_code'];                $gm_name   =          $row['gm_name'] ;				$gm_name   =          substr($gm_name,0,22);                $basic   =           round($row['basic']);                $da   =              round($row['da']);				// $sumda +=             $da;                $hra   =             round($row['hra']);  				//$sumhra +=             $hra;	                $pf   =              round($row['pf']);                 $ptax   =            round($row['ptax']);                 $advance   =         round($row['advance']);								                $esic_e   =           round($row['esic_e']);								                $net_salary   =      round($row['net_salary']);				                $category   =         $row['category'];                $account_number =      $row['account_number'];                $esic_o   =           $row['esic_o'];				$sumesic_o +=                $esic_o ;                 $_SESSION["net_salary"]  = $net_salary;                                 $amount_word = Show_Amount_In_Words($net_salary);                                echo  $yyMM ," ", $py_badge_no ," ", $gm_name ," ",         $basic ," ",       	 $da  ," ",          $hra ," ",		 $pf ," ",		 $esic_e , " ",		 $advance ," ",	     $net_salary,  $amount_word	; 		 	    					      }	  	                		 		 	DBconnectionUtil::disconnect();return "SUCCESS";}				  ?>